## MyVT-Overview
My Verilog Template is a project that I will be working on my free time. The project aim is to compile and elaborate Verilog modules. The Verilog cores are written in traditional Verilog and might use `include "file" to add automatically generated code.

### Index
1. [How to use MyVT](#how-to-use-myvt)
2. [Development Environment](#development-environment)
3. [VTbuild.py](#vtbuild)
4. [VTcolor.py](#vtcolors)
5. [MyLibrary](#mylibrary)
4. [Glossary](#glossary)
5. [Contributing](#contributing)
6. [Credits](#credits)

## How to use MyVT
Using "MyVT" will create a build directory where all the RTL code needed to build the core can be found. The first step to do so is calling the "VTbuild" script.
### Calling VTbuild
The main Makefile of the project should define the project name and call the "VTbuild" script. The project name will be use to find the core top module, as it should be the "project name".\[v/vs\] and the top test-bench which should be "project name"\_tb\_.\[v/vs/cpp\].  
See the usage section of [VTbuild.py](#vtbuild) for more information on how to call it.

### Using or Creating scripts
Users can create custom scripts that generate ".vs" files or Verilog modules or use those that are already existent. Any scripting language can be used.  All scripts which generate Verilog code (be it modules or ".vs" files) are independent from "VTbuild". Therefor, "VTbuild" only calls the scripts and does not import them.

## VTbuild
The **VTbuild** script is the core functions of the MyVT-Tool. This script creates the build directory with the verilog modules and headers used by the projects hardware. The code under the `./build` directory is the one that should be used in simulation and when synthesizing for the FPGA.

### Usage
**VTbuild** must receive at least one argument.  
To show this help page: 
> Usage: python VTbuild.py --help

Create a build directory containing all the compiled hardware:
> Usage: python VTbuild.py <main_module> --TestBench <testbench_name> --Boards <board_modules>  
  <main_module> -> This is the name of the main RTL design.  
  --TestBench <testbench_name> (optional) -> by default VTbuild looks for a TestBench file with the name <main_module>_tb.  
  --Boards <board_modules> (optional) -> by default VTbuild looks for NO board RTL design top module. Multiple boards can be passed in a single argument (example, "Board1 Board2 Board3").  
  --quiet (optional) -> suppresses INFO prints.  
  --debug (optional) -> enables DEBUG prints.

Clean the contents generated by VTbuild:
> Usage: python VTbuild.py --clean all
  all (optional) -> By default "--clean" only removes the "build" directory, with "all" it also removes the "hardware/generated" directory.

Example of calling **VTbuild**:  
`python3 ./VTbuild top_module --TestBench top_module_tb --Boards "top_module_ecp5"`
or  
`./VTbuild --help`

### Code structure
**VTbuild** code is distinctly divided into three stages.  
- in **1st stage** the function `find_vs_scripts_and_verilog()` finds all existing verilog modules, headers, snippets and scripts under the current directory.
- the **2nd stage** is where it finds the verilog modules and snippets needed by the core. If a verilog module or a snippet does not exist it will try to generate them. The generated snippets should be stored under the `./rtl/generated` directory. The function called for this stage is `verilog_fetch()`.
- during the **3rd stage** all verilog snippet files included are substituted for its content. Those files are then stored under the `./build` directory.

#### **2nd stage** - details
- When calling scripts to generate ".vs" priority is always given to scripts with the full name of the file. If there is no script curresponding to the ".vs" name look for a script that currsponds only to the inicial part of the name. Example:
	- in `include "io_modules.vs"` look for `VTio.py` or `io.py` if `io_modules.py` does not exist.
- When calling scripts that generate modules the script should have the name of the module.
- "VTbuild" only calls the scripts if they are newer then the files already existent.
- When there are two or more scripts with the same name a warning should be printed and the script with the closest directory path should be used. 
- All files and scripts should only be looked for from the base directory of the project, unless specified otherwise in a custom script.

#### **3rd stage** - details
- all files which are generated should have a copy in the "aux" directory
- "VTbuild" substitutes the ".vs" and copies the modules needed to the build directory, after finding or generating all modules and ".vs" files.

## VTcolors
This script defines the colors that should be used when printing error, warning or successful messages.  
It defines the `print_coloured()` function and some variables that allow to modify the text printed to the console.

## MyLibrary
The "MyLibrary" directory contains hardware Verilog modules, snippets and scripts that might be commonly reused.

### Scripts
This section of the README contains information about the scripts present under the `./library/scripts` directory.  
Read more about each script in the [README.md on the scripts directory](https://github.com/PedroAntunes178/MyVT-Tool/tree/main/MyLibrary/scripts/README.md).


## Opening an Issue

Welcome to our issue reporting system! We appreciate your contribution to the project by reporting any issues you encounter. Your feedback helps us make this project even better.

### How to Open an Issue

When opening an issue, please follow this format:

> **Issue Title**: A concise and descriptive title for the issue.

> Hello **Tag the developers you think might be able to help**,
> 
> ## Issue Description:  
> Provide a detailed description of the issue you encountered. Include information about your environment, steps to reproduce the issue, and any error messages. The more details you provide, the easier it is for us to understand and address the problem.
> 
> ## Solution Reference (Optional):  
> If you have a solution in mind, you're welcome to present it and provide a detailed explanation of why you believe it will work. If possible, include references to supporting pages or documentation that back your proposed solution. This can help us better understand your perspective and expedite the resolution process.
> 
> ## Suggested Changes (Optional):  
> If you have ideas for changes that might solve the issue, propose them here. Be clear and concise in your suggestions.
> 
> ## Additional Question (Optional):  
> If you have questions directly or indirectly related to the issue, feel free to ask them in this section.

Tag developers by using `@username` to get their attention.

We appreciate your help in improving this project!

## Contributing
All contributions to this project are warmly welcomed.

Contributions in the form of automatically generated Verilog scripts should be placed within the hardware/scripts directory. Additionally, contributors are required to create a corresponding section in the README when adding a script. This section should detail the generated core and provide instructions on the script's usage. It is important that the section structure aligns with the structures of other script sections.

## Development Environment
To utilize VTbuild, all that's necessary is Python3 and support for the scripting languages in which your scripts are written.

## Credits
This project idea came to me while I was working at IObundle. IObundle was developing a similar open-source tool called python-setup. 

The two projects are fundamentally different. Therefore I decided to create this project from 0 instead of contributing the ideas and tools directly to IObundle's python-setup.

Where the two projects are similar is both are being developed to generate automatic verilog. 

Where they mainly differ is on the way the verilog is generated. The IObundle python-setup project aims to generate all the verilog core using a python framework. MyVerilogTemplate aims to substitute the .vs files present on the verilog code. Generating the .vs code as needed. There may also exist scripts that generate .v modules.
